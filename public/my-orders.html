<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>طلباتي - لوحة تحكم الطبيب</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/اسنان9.css" />
    <style>
        /* CSS إضافي خاص بصفحة الطلبات */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .orders-table th, .orders-table td {
            text-align: right;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .orders-table th {
            background-color: var(--border);
            color: var(--text);
            font-weight: 700;
        }

        .orders-table tr:hover {
            background-color: #f6f7fb;
        }
        
        .dark .orders-table tr:hover {
            background-color: var(--card);
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-new { background-color: #dbeafe; color: #1e40af; }
        .status-in-progress { background-color: #fef3c7; color: #b45309; }
        .status-completed { background-color: #dcfce7; color: #166534; }
        .status-cancelled { background-color: #fee2e2; color: #991b1b; }
        
        .dark .status-new { background-color: #1e40af; color: #dbeafe; }
        .dark .status-in-progress { background-color: #b45309; color: #fef3c7; }
        .dark .status-completed { background-color: #166534; color: #dcfce7; }
        .dark .status-cancelled { background-color: #991b1b; color: #fee2e2; }

        /* تنسيقات جديدة لسطر المريض */
        .patient-row td {
            background-color: #f0f2f5;
            font-weight: bold;
            border-bottom: none;
            padding-top: 20px !important;
        }

        .dark .patient-row td {
            background-color: #2e3541;
        }

        .orders-table tr:not(.patient-row) td {
            border-top: 1px solid var(--border);
        }
        
        /* ** تنسيقات جدول معلومات الطبيب ** */
        .profile-info-container {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .dark .profile-info-container {
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .profile-info-container h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--main);
        }
        .profile-table {
            width: 100%;
            border-collapse: collapse;
        }
        .profile-table th, .profile-table td {
            text-align: right;
            padding: 8px 0;
        }
        .profile-table th {
            font-weight: normal;
            color: var(--text-muted);
            width: 150px;
        }
        .edit-profile-note {
            font-size: 0.9em;
            text-align: center;
            margin-top: 1rem;
            color: var(--text-muted);
        }

    </style>
</head>
<body class="dark">
    <header class="main-header">
        <div class="header-container">
            <a href="اسنان9.html" class="logo">مختبر الأسنان</a>
            <nav class="main-nav">
                <ul>
                    <li><a href="about.html">about</a></li>
                    <li><a href="اسنان9.html">New Order</a></li>
                    <li><a href="profile.html">Profile</a></li>
                    <li><a href="login.html">Log in</a></li>
                    <li><a href="my-orders.html">My Orders</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main class="container">
        <h1>لوحة تحكم الطبيب</h1>
        <section class="card">
            <h2>إحصائيات سريعة</h2>
            <div class="grid">
                <div>
                    <h4>إجمالي الطلبات</h4>
                    <p id="totalOrders">0</p>
                </div>
                <div>
                    <h4>طلبات قيد التنفيذ</h4>
                    <p id="inProgressOrders">0</p>
                </div>
                <div>
                    <h4>طلبات منجزة</h4>
                    <p id="completedOrders">0</p>
                </div>
            </div>
        </section>
        <section class="card">
            <h2>طلباتك السابقة</h2>
            
            <div class="profile-info-container">
                <h3>معلومات ملف التعريف</h3>
                <table class="profile-table">
                    <tr>
                        <th>اسم الطبيب</th>
                        <td id="doctor-name"></td>
                    </tr>
                    <tr>
                        <th>العيادة</th>
                        <td id="clinic-name"></td>
                    </tr>
                    <tr>
                        <th>رقم الهاتف</th>
                        <td id="doctor-phone"></td>
                    </tr>
                    <tr>
                        <th>التخصص</th>
                        <td id="specialization"></td>
                    </tr>
                    <tr>
                        <th>المدينة</th>
                        <td id="city"></td>
                    </tr>
                </table>
                <p class="edit-profile-note">
                    لتعديل هذه المعلومات، يرجى زيارة <a href="profile.html">صفحة ملف التعريف</a>.
                </p>
            </div>
            
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>الرقم</th>
                        <th>المريض</th>
                        <th>التعويض</th>
                        <th>المادة</th>
                        <th>اللون</th>
                        <th>السن</th> 
                        <th>تاريخ الطلب</th>
                        <th class="status">الحالة</th>
                    </tr>
                </thead>
                <tbody id="orders-list">
                    <tr>
                        <td colspan="7" style="text-align:center;">جارٍ تحميل الطلبات...</td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section class="card" id="chatSection" style="display: none; margin-top: 20px;">
            <h2>الدردشة الخاصة بالطلب <span id="chatOrderIdDisplay">
    </span>
        </h2>
            <div class="chat-box" style="height: 300px; overflow-y: scroll; border: 1px solid var(--border); padding: 10px; border-radius: 8px; background-color: var(--background);">
                <ul id="chat-messages" style="list-style: none; padding: 0;">
                                    </ul>
            </div>
            <form id="chat-form" style="display: flex; margin-top: 10px;">
                <input type="text" id="chat-input" placeholder="اكتب رسالتك..." style="flex-grow: 1; padding: 10px; border: 1px solid var(--border); border-radius: 8px 0 0 8px; font-family: 'Cairo', sans-serif;" />
                <button type="submit" class="btn" style="border-radius: 0 8px 8px 0;">إرسال</button>
            </form>
        </section>
    </main>
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-info">
                <h4>تواصل معنا</h4>
                <p>البريد الإلكتروني: <a href="mailto:info@dentalab.com">info@dentalab.com</a></p>
                <p>الهاتف: +963-000-0000</p>
            </div>
            <div class="footer-links">
                <h4>روابط سريعة</h4>
                <ul>
                    <li><a href="#">سياسة الخصوصية</a></li>
                    <li><a href="#">شروط الاستخدام</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">&copy; 2025 اسم المختبر. جميع الحقوق محفوظة.</div>
    </footer>
    <script src="js/auth-guard.js"></script>
    <script src="js/my-orders.js"></script>
</body>
</html>